{% extends "base.html" %}

{% block title %}Panel de Coordinación de Tutorías{% endblock %}

{% block content %}
<!-- Main Content -->
<div class="main-container">
  <div class="container">
    

    <!-- Título + buscador -->
    <div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center mb-4 gap-3">
      <h2 class="mb-0">Panel de Coordinación de Tutorías</h2>
      <div class="d-flex flex-column flex-sm-row gap-2">
        <div class="search-box">
          <input type="text" class="form-control" placeholder="Buscar...">
          <i class="bi bi-search"></i>
        </div>
      </div>
    </div>

    <!-- Tarjetas principales -->
    <div class="row g-4">
      <!-- Tutores asignados -->
      <div class="col-md-6 col-lg-3">
        <div class="dashboard-card">
          <div class="card-icon"><i class="bi bi-people-fill"></i></div>
          <h5 class="card-title">Tutores asignados</h5>
          <p class="card-text">
            Consulta y gestiona los tutores que tienes a tu cargo en el programa de tutorías.
          </p>
          <div class="mt-3">
            <span class="badge bg-info">
              {{ coordac_stats.tutors_assigned|default:10 }} tutores asignados
            </span>
          </div>
        </div>
      </div>

      <!-- Bandeja de reportes de tutoría -->
      <div class="col-md-6 col-lg-3">
        <div class="dashboard-card">
          <div class="card-icon"><i class="bi bi-inbox-fill"></i></div>
          <h5 class="card-title">Reportes de Tutoría</h5>
          <p class="card-text">
            Revisa, devuelve y canaliza los reportes de acción tutorial enviados por los tutores.
          </p>
          <div class="mt-2">
            <span class="badge bg-warning text-dark">
              {{ coordac_stats.pending_reports|default:3 }} reportes pendientes
            </span>
          </div>
          <a href="{% url 'coordinator_report_inbox' %}"
             class="btn btn-primary-custom btn-sm mt-3 w-100">
            <i class="bi bi-eye me-1"></i> Ver bandeja de reportes
          </a>
        </div>
      </div>

      <!-- Cumplimiento de tutores -->
      <div class="col-md-6 col-lg-3">
        <div class="dashboard-card">
          <div class="card-icon"><i class="bi bi-clipboard-check"></i></div>
          <h5 class="card-title">Cumplimiento de Tutores</h5>
          <p class="card-text">
            Marca si cada tutor cumplió o no con los objetivos del PIT. Desde aquí podrás generar el reporte oficial.
          </p>
          <div class="d-grid gap-2 mt-2">
            <a href="{% url 'coordac_tutor_compliance' %}"
               class="btn btn-primary-custom btn-sm">
              <i class="bi bi-list-check me-1"></i>
              Registrar cumplimiento
            </a>
            <a href="{% url 'coordac_tutor_compliance_pdf' %}" target="_blank"
               class="btn btn-outline-primary btn-sm">
              <i class="bi bi-file-earmark-pdf me-1"></i>
              Generar reporte PDF
            </a>
          </div>
        </div>
      </div>

      <!-- Seguimiento institucional -->
      <div class="col-md-6 col-lg-3">
        <div class="dashboard-card">
          <div class="card-icon"><i class="bi bi-arrow-repeat"></i></div>
          <h5 class="card-title">Seguimiento Institucional</h5>
          <p class="card-text">
            Da seguimiento a los acuerdos con Jefatura de Departamento y Coordinación Institucional con base en los reportes de cumplimiento.
          </p>
          <div class="mt-2">
            <span class="badge bg-success">
              {{ coordac_stats.followup_actions|default:4 }} acciones de seguimiento
            </span>
          </div>
        </div>
      </div>
    </div>

    <!-- Estadísticas básicas -->
    <div class="row mt-5 g-4">
      <div class="col-md-3 col-6">
        <div class="dashboard-card text-center">
          <div class="stats-number">{{ coordac_stats.tutors_assigned|default:10 }}</div>
          <div class="stats-label">Tutores a tu cargo</div>
        </div>
      </div>
      <div class="col-md-3 col-6">
        <div class="dashboard-card text-center">
          <div class="stats-number">
            {{ coordac_stats.compliance_rate|default:"80%" }}
          </div>
          <div class="stats-label">Cumplimiento global</div>
        </div>
      </div>
      <div class="col-md-3 col-6">
        <div class="dashboard-card text-center">
          <div class="stats-number">
            {{ coordac_stats.reports_reviewed|default:15 }}
          </div>
          <div class="stats-label">Reportes revisados</div>
        </div>
      </div>
      <div class="col-md-3 col-6">
        <div class="dashboard-card text-center">
          <div class="stats-number">
            {{ coordac_stats.reports_returned|default:2 }}
          </div>
          <div class="stats-label">Reportes devueltos</div>
        </div>
      </div>
    </div>

  </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function updateDateTime() {
    const now = new Date();
    const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
    const el = document.getElementById('current-date');
    if (el) {
      el.textContent = now.toLocaleDateString('es-ES', options);
    }
  }
  setInterval(updateDateTime, 60000);
  updateDateTime();
</script>
</body>
</html>

{% endblock %}