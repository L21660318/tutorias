{% extends "base.html" %}

{% block title %}Validar constancias de tutoría{% endblock %}

{% block content %}
<body>
  <!-- Main Content -->
  <div class="main-container">
    <div class="container">
      <!-- Welcome Section -->
      <div class="welcome-section">
        <div class="row align-items-center">
          <div class="col-md-8">
            <h2>Panel Académico</h2>
            <p class="mb-0">
              Coordinación y seguimiento académico del Programa Institucional de Tutorías.
            </p>
          </div>
          <div class="col-md-4 text-md-end">
            <span class="badge bg-light text-dark">{{ request.user.get_role_display }}</span>
            <p class="mb-0 mt-2" id="current-date"></p>
          </div>
        </div>
      </div>

      <!-- Stats Dashboard -->
      <div class="row mb-4">
        <div class="col-md-3 col-6 mb-4">
          <div class="dashboard-card card stat-1">
            <div class="card-body text-center">
              <div class="card-icon">
                <i class="bi bi-file-check-fill"></i>
              </div>
              <h3 class="stats-number">
                {{ stats.constancias_validadas|default:12 }}
              </h3>
              <p class="stats-label">Constancias validadas</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-6 mb-4">
          <div class="dashboard-card card stat-2">
            <div class="card-body text-center">
              <div class="card-icon">
                <i class="bi bi-bar-chart-line-fill"></i>
              </div>
              <h3 class="stats-number">
                {{ stats.informes_recibidos|default:5 }}
              </h3>
              <p class="stats-label">Informes recibidos</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-6 mb-4">
          <div class="dashboard-card card stat-3">
            <div class="card-body text-center">
              <div class="card-icon">
                <i class="bi bi-hand-thumbs-up-fill"></i>
              </div>
              <h3 class="stats-number">
                {{ stats.apoyos_gestionados|default:8 }}
              </h3>
              <p class="stats-label">Apoyos gestionados</p>
            </div>
          </div>
        </div>
        <div class="col-md-3 col-6 mb-4">
          <div class="dashboard-card card stat-4">
            <div class="card-body text-center">
              <div class="card-icon">
                <i class="bi bi-people-fill"></i>
              </div>
              <h3 class="stats-number">
                {{ stats.reuniones_programadas|default:3 }}
              </h3>
              <p class="stats-label">Reuniones programadas</p>
            </div>
          </div>
        </div>
      </div>

      <!-- Funciones Académicas -->
      <div class="row mb-4">
        <div class="col-12">
          <h4 class="section-title">Funciones Académicas</h4>
        </div>

        <div class="col-md-6 col-lg-4 mb-4">
          <div class="dashboard-card card">
            <div class="card-body">
              <div class="card-icon"><i class="bi bi-hand-thumbs-up-fill"></i></div>
              <h5 class="card-title">Gestión de apoyos</h5>
              <p class="card-text">
                Gestiona ante las instancias institucionales e interinstitucionales los apoyos necesarios
                para el trabajo tutorial, mediante mecanismos de vinculación.
              </p>
              <!-- <a href="#" class="btn btn-sm btn-primary-custom">Ver apoyos</a> -->
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-4 mb-4">
          <div class="dashboard-card card">
            <div class="card-body">
              <div class="card-icon"><i class="bi bi-file-check-fill"></i></div>
              <h5 class="card-title">Validación de constancias</h5>
              <p class="card-text">
                Valida las constancias de cumplimiento de los tutores expedidas por el(la) Jefe(a) de
                Desarrollo Académico o su equivalente al final del semestre.
              </p>
              <!-- <a href="#" class="btn btn-sm btn-primary-custom">Validar constancias</a> -->
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-4 mb-4">
          <div class="dashboard-card card">
            <div class="card-body">
              <div class="card-icon"><i class="bi bi-bar-chart-line-fill"></i></div>
              <h5 class="card-title">Informe semestral</h5>
              <p class="card-text">
                Recibe del(la) Jefe(a) de Desarrollo Académico un informe ejecutivo semestral sobre los
                resultados del PIT y lo envía al(la) Director(a) del Instituto.
              </p>
              <!-- <a href="#" class="btn btn-sm btn-primary-custom">Ver informes</a> -->
            </div>
          </div>
        </div>
      </div>

      <!-- Plan de 12 sesiones -->
      <div class="row mb-4">
        <div class="col-md-12 col-lg-8 mb-4">
          <div class="dashboard-card card">
            <div class="card-body">
              <div class="card-icon"><i class="bi bi-calendar2-week-fill"></i></div>
              <h5 class="card-title">Plan de 12 sesiones del PIT</h5>
              <p class="card-text">
                Define las 12 sesiones del Programa Institucional de Tutorías para cada tutor y período.
                El sistema generará automáticamente las sesiones del plan para todos los tutorados asignados
                a ese tutor.
              </p>
              <a href="{% url 'academic_plan_sessions' %}" class="btn btn-primary-custom">
                <i class="bi bi-pencil-square me-1"></i> Definir / editar plan de 12 sesiones
              </a>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-4 mb-4">
          <div class="dashboard-card card">
            <div class="card-body">
              <div class="card-icon"><i class="bi bi-clipboard-check"></i></div>
              <h5 class="card-title">Seguimiento del plan</h5>
              <p class="card-text">
                Consulta el avance global de las 12 sesiones por tutor y período, así como el cumplimiento
                de los tutorados.
              </p>
              {# En el futuro puedes crear una vista de resumen y enlazarla aquí #}
              {# <a href="{% url 'academic_plan_summary' %}" class="btn btn-sm btn-outline-primary">Ver resumen</a> #}
            </div>
          </div>
        </div>
      </div>
      <a href="{% url 'subac_group_certificates' %}" class="btn btn-sm btn-primary">
          <i class="bi bi-award me-1"></i> Validar constancias por grupo
      </a>


    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    function updateDateTime() {
      const now = new Date();
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      const el = document.getElementById('current-date');
      if (el) {
        el.textContent = now.toLocaleDateString('es-ES', options);
      }
    }
    setInterval(updateDateTime, 60000);
    updateDateTime();
  </script>
</body>
{% endblock %}
</html>
